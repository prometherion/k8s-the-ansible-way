---
  #
  # CFSSL
  #

  - name: load system-dependant vars
    include_vars:
      file: "{{ ansible_system}}.yml"

  - name: Installing `cfssl`
    get_url:
      url: "{{ cfssl_package }}"
      dest: "{{ executable_path }}/cfssl"
      mode: +x

  - name: Installing `cfssljson`
    get_url:
      url: "{{ cfssljson_package }}"
      dest: "{{ executable_path }}/cfssljson"
      mode: +x

  #FIXME: we don't really need this, get_url is working as per Ansible contract
  - name: Checking `cfssl`
    command: cfssl version

  #FIXME: we don't really need this, get_url is working as per Ansible contract
  - name: Checking `cfssl`
    command: cfssljson
    register: cfssljson_cmd
    failed_when: cfssljson_cmd.rc != 1
  #
  # kubectl
  #
  - name: Mac OS X distribution
    include_tasks: kubectl/macosx.yml
    when: ansible_distribution == 'MacOSX'

  - name: Linux distribution
    include_tasks: kubectl/loinux.yml
    when: ansible_distribution != 'MacOSX'

  - name: Checking `kubectl`
    command: kubectl version --client
